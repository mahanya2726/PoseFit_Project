{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/mahan/ProjectsNew/Python/coach/aicoach/src/app/session/result/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n  Cell,\r\n} from \"recharts\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function ResultPage() {\r\n  const params = useSearchParams();\r\n\r\n  const exercise = params.get(\"exercise\") || \"unknown\";\r\n  const isPlank = exercise === \"plank\";\r\n\r\n  const total = isPlank\r\n    ? parseFloat(params.get(\"duration\") || \"0\")\r\n    : parseInt(params.get(\"total\") || \"0\");\r\n\r\n  const good = isPlank\r\n    ? total - parseInt(params.get(\"badframes\") || \"0\")\r\n    : parseInt(params.get(\"good\") || \"0\");\r\n\r\n  const bad = isPlank\r\n    ? parseInt(params.get(\"badframes\") || \"0\")\r\n    : parseInt(params.get(\"bad\") || \"0\");\r\n\r\n  const accuracy = total > 0 ? ((good / total) * 100).toFixed(1) : \"0.0\";\r\n  const calories = (total * (isPlank ? 0.15 : 0.4)).toFixed(1);\r\n  const duration = isPlank ? total : total * 2;\r\n\r\n  const warnings = decodeURIComponent(params.get(\"warnings\") || \"\")\r\n    .split(\"; \")\r\n    .filter((w) => w.trim().length > 0);\r\n\r\n  const chartData = [\r\n    { name: \"Good\", value: good, fill: \"#22c55e\" },\r\n    { name: \"Bad\", value: bad, fill: \"#ef4444\" },\r\n  ];\r\n\r\n  // Save result in localStorage for history\r\n  useEffect(() => {\r\n    const today = new Date().toISOString();\r\n\r\n    const newEntry = {\r\n      exercise,\r\n      date: today,\r\n      total,\r\n      good,\r\n      bad,\r\n      accuracy: parseFloat(accuracy),\r\n    };\r\n\r\n    const prev = JSON.parse(localStorage.getItem(\"posefit_history\") || \"[]\");\r\n    localStorage.setItem(\"posefit_history\", JSON.stringify([...prev, newEntry]));\r\n    console.log(\"‚úÖ Saved to posefit_history:\", newEntry);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center min-h-screen px-4 py-10 bg-gradient-to-br from-black to-gray-900 text-white\">\r\n      <h1 className=\"text-4xl font-bold mb-6\">üèÅ {exercise.toUpperCase()} Results</h1>\r\n\r\n      <div className=\"w-full max-w-xl space-y-6 bg-white/10 rounded-xl p-6\">\r\n        {/* Stats Grid */}\r\n        <div className=\"grid grid-cols-2 gap-4 text-center\">\r\n          <div className=\"bg-black/30 rounded-lg p-4\">\r\n            <p className=\"text-sm text-gray-400\">\r\n              Total {isPlank ? \"Seconds\" : \"Reps\"}\r\n            </p>\r\n            <p className=\"text-xl font-semibold\">{total}</p>\r\n          </div>\r\n          <div className=\"bg-black/30 rounded-lg p-4\">\r\n            <p className=\"text-sm text-gray-400\">Accuracy</p>\r\n            <p className=\"text-xl font-semibold\">{accuracy}%</p>\r\n          </div>\r\n          <div className=\"bg-black/30 rounded-lg p-4\">\r\n            <p className=\"text-sm text-gray-400\">Calories Burned</p>\r\n            <p className=\"text-xl font-semibold\">{calories}</p>\r\n          </div>\r\n          <div className=\"bg-black/30 rounded-lg p-4\">\r\n            <p className=\"text-sm text-gray-400\">Workout Duration</p>\r\n            <p className=\"text-xl font-semibold\">{duration} sec</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Bar Chart */}\r\n        <ResponsiveContainer width=\"100%\" height={250}>\r\n          <BarChart data={chartData} layout=\"vertical\">\r\n            <XAxis type=\"number\" />\r\n            <YAxis type=\"category\" dataKey=\"name\" />\r\n            <Tooltip />\r\n            <Bar dataKey=\"value\">\r\n              {chartData.map((entry, index) => (\r\n                <Cell key={`cell-${index}`} fill={entry.fill} />\r\n              ))}\r\n            </Bar>\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n\r\n        {/* Posture Feedback */}\r\n        <div className=\"bg-black/30 rounded-lg p-4 text-sm text-gray-300\">\r\n          <p className=\"text-base font-semibold mb-2\">\r\n            {isPlank ? \"üß† Posture Feedback:\" : \"üß† Form Insights:\"}\r\n          </p>\r\n\r\n          {total === 0 ? (\r\n            <p className=\"text-red-400\">\r\n              ‚ùå No proper {exercise} detected. Please ensure your form is visible and try again.\r\n            </p>\r\n          ) : warnings.length === 0 ? (\r\n            <p className=\"text-green-400\">\r\n              ‚úÖ Great job! No major posture issues detected during your {exercise} session.\r\n            </p>\r\n          ) : (\r\n            <ul className=\"list-disc list-inside space-y-1\">\r\n              {warnings.map((w, idx) => (\r\n                <li key={idx} className=\"text-red-300\">{w}</li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex gap-4 pt-4 justify-center\">\r\n          <button\r\n            onClick={() => window.location.href = `/session/${exercise}`}\r\n            className=\"bg-green-600 hover:bg-green-700 px-5 py-2 rounded-md text-white font-medium\"\r\n          >\r\n            üîÅ Try Again\r\n          </button>\r\n          <button\r\n            onClick={() => window.location.href = \"/select\"}\r\n            className=\"bg-blue-600 hover:bg-blue-700 px-5 py-2 rounded-md text-white font-medium\"\r\n          >\r\n            üîô Go to Select Page\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAZA;;;;;AAce,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,kBAAe,AAAD;IAE7B,MAAM,WAAW,OAAO,GAAG,CAAC,eAAe;IAC3C,MAAM,UAAU,aAAa;IAE7B,MAAM,QAAQ,UACV,WAAW,OAAO,GAAG,CAAC,eAAe,OACrC,SAAS,OAAO,GAAG,CAAC,YAAY;IAEpC,MAAM,OAAO,UACT,QAAQ,SAAS,OAAO,GAAG,CAAC,gBAAgB,OAC5C,SAAS,OAAO,GAAG,CAAC,WAAW;IAEnC,MAAM,MAAM,UACR,SAAS,OAAO,GAAG,CAAC,gBAAgB,OACpC,SAAS,OAAO,GAAG,CAAC,UAAU;IAElC,MAAM,WAAW,QAAQ,IAAI,CAAC,AAAC,OAAO,QAAS,GAAG,EAAE,OAAO,CAAC,KAAK;IACjE,MAAM,WAAW,CAAC,QAAQ,CAAC,UAAU,OAAO,GAAG,CAAC,EAAE,OAAO,CAAC;IAC1D,MAAM,WAAW,UAAU,QAAQ,QAAQ;IAE3C,MAAM,WAAW,mBAAmB,OAAO,GAAG,CAAC,eAAe,IAC3D,KAAK,CAAC,MACN,MAAM,CAAC,CAAC,IAAM,EAAE,IAAI,GAAG,MAAM,GAAG;IAEnC,MAAM,YAAY;QAChB;YAAE,MAAM;YAAQ,OAAO;YAAM,MAAM;QAAU;QAC7C;YAAE,MAAM;YAAO,OAAO;YAAK,MAAM;QAAU;KAC5C;IAED,0CAA0C;IAC1C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,QAAQ,IAAI,OAAO,WAAW;QAEpC,MAAM,WAAW;YACf;YACA,MAAM;YACN;YACA;YACA;YACA,UAAU,WAAW;QACvB;QAEA,MAAM,OAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,sBAAsB;QACnE,aAAa,OAAO,CAAC,mBAAmB,KAAK,SAAS,CAAC;eAAI;YAAM;SAAS;QAC1E,QAAQ,GAAG,CAAC,+BAA+B;IAC7C,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;;oBAA0B;oBAAI,SAAS,WAAW;oBAAG;;;;;;;0BAEnE,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;;4CAAwB;4CAC5B,UAAU,YAAY;;;;;;;kDAE/B,8OAAC;wCAAE,WAAU;kDAAyB;;;;;;;;;;;;0CAExC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;kDAAwB;;;;;;kDACrC,8OAAC;wCAAE,WAAU;;4CAAyB;4CAAS;;;;;;;;;;;;;0CAEjD,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;kDAAwB;;;;;;kDACrC,8OAAC;wCAAE,WAAU;kDAAyB;;;;;;;;;;;;0CAExC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;kDAAwB;;;;;;kDACrC,8OAAC;wCAAE,WAAU;;4CAAyB;4CAAS;;;;;;;;;;;;;;;;;;;kCAKnD,8OAAC,mKAAA,CAAA,sBAAmB;wBAAC,OAAM;wBAAO,QAAQ;kCACxC,cAAA,8OAAC,oJAAA,CAAA,WAAQ;4BAAC,MAAM;4BAAW,QAAO;;8CAChC,8OAAC,qJAAA,CAAA,QAAK;oCAAC,MAAK;;;;;;8CACZ,8OAAC,qJAAA,CAAA,QAAK;oCAAC,MAAK;oCAAW,SAAQ;;;;;;8CAC/B,8OAAC,uJAAA,CAAA,UAAO;;;;;8CACR,8OAAC,mJAAA,CAAA,MAAG;oCAAC,SAAQ;8CACV,UAAU,GAAG,CAAC,CAAC,OAAO,sBACrB,8OAAC,oJAAA,CAAA,OAAI;4CAAuB,MAAM,MAAM,IAAI;2CAAjC,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;;;;;;;;;;;;kCAOlC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CACV,UAAU,yBAAyB;;;;;;4BAGrC,UAAU,kBACT,8OAAC;gCAAE,WAAU;;oCAAe;oCACb;oCAAS;;;;;;uCAEtB,SAAS,MAAM,KAAK,kBACtB,8OAAC;gCAAE,WAAU;;oCAAiB;oCAC+B;oCAAS;;;;;;qDAGtE,8OAAC;gCAAG,WAAU;0CACX,SAAS,GAAG,CAAC,CAAC,GAAG,oBAChB,8OAAC;wCAAa,WAAU;kDAAgB;uCAA/B;;;;;;;;;;;;;;;;kCAOjB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS,IAAM,OAAO,QAAQ,CAAC,IAAI,GAAG,CAAC,SAAS,EAAE,UAAU;gCAC5D,WAAU;0CACX;;;;;;0CAGD,8OAAC;gCACC,SAAS,IAAM,OAAO,QAAQ,CAAC,IAAI,GAAG;gCACtC,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;AAOX","debugId":null}}]
}